---
import { NavigateBtn } from "@/atoms";
import { CloseIcon } from "@/icons";
import { LINKS } from "@/utils/routes";
---

<nav
  aria-label="Global"
  class:list={[
    "fixed inset-0 z-50 h-dvh w-screen bg-white py-20",
    "md:static md:inset-auto md:flex md:h-auto md:w-auto md:justify-center md:py-0",
  ]}
  id="main-menu"
>
  <button
    id="btn-close"
    class="absolute top-6 right-4 z-10 shrink-0 cursor-pointer self-end md:hidden"
    aria-label="close sidebar"
    aria-expanded="true"
    aria-controls="main-menu"
  >
    <CloseIcon />
    <span class="sr-only">Cerrar menú</span>
  </button>
  <ul
    class:list={["flex flex-col items-center gap-6 md:flex-row md:items-start"]}
  >
    {
      LINKS.map((link) => (
        <li>
          <a
            class="hover:text-primary active:text-primary transition-colors duration-300 hover:font-bold"
            href={link.to}
          >
            {link.label}
          </a>
        </li>
      ))
    }
  </ul>
</nav>

<div class="flex items-center gap-2 justify-self-end">
  <NavigateBtn>Agendar consulta</NavigateBtn>
  <button
    id="btn-open"
    class="cursor-pointer md:hidden"
    aria-controls="main-menu"
    aria-expanded="false"
    aria-label="open sidebar"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="size-5"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
    <span class="sr-only">Abrir menú</span>
  </button>
</div>

<script src="@/scripts/menuToggle.ts"></script>

<style>
  @reference "@/styles/global.css";
  @keyframes scale-up-hor-right {
    0% {
      transform: scaleX(0);
      transform-origin: 100% 100%;
    }
    100% {
      transform: scaleX(1);
      transform-origin: 100% 100%;
    }
  }

  .scale-up-hor-right-normal {
    animation: scale-up-hor-right 0.4s cubic-bezier(0.39, 0.575, 0.565, 1) 0s 1
      normal both;
  }

  /* ----------------------------------------------
* Generated by Gradienty on 2025-08-03 16:59
* animation scale-down-hor-right-normal
* ----------------------------------------
*/
  @keyframes scale-down-hor-right {
    0% {
      transform: scaleX(1);
      transform-origin: 100% 100%;
    }
    100% {
      transform: scaleX(0);
      transform-origin: 100% 100%;
    }
  }

  .scale-down-hor-right-normal {
    animation: scale-down-hor-right 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0s
      1 normal both;
  }

  @media screen and (width <= 768px) {
    #main-menu {
      @apply opacity-0 transition-transform duration-300 ease-in-out;

      & ul > li {
        @apply pointer-events-none;
      }
    }

    #main-menu.show {
      @apply opacity-100;

      & ul > li {
        @apply pointer-events-auto;
      }
    }
  }
</style>
